/*
 *     Generated by class-dump 3.3.4 (64 bit).
 *
 *     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2011 by Steve Nygard.
 */

#import "NSObject.h"

@class IMAccount, IMChatItem, IMChatRegistry, IMHandle, IMMessage, IMMultiDict, IMScheduledUpdater, IMTimingCollection, NSArray, NSDate, NSMutableArray, NSMutableDictionary, NSMutableSet, NSSet, NSString, NSTimer;

@interface IMChat : NSObject
{
    NSString *_guid;
    NSString *_typingGUID;
    NSString *_currentLocationGUID;
    NSString *_identifier;
    IMAccount *_account;
    NSString *_displayName;
    NSString *_roomName;
    NSString *_roomNameWithoutSuffix;
    NSString *_lastAddressedHandleID;
    NSString *_groupID;
    NSDate *_dateCreated;
    NSDate *_dateModified;
    NSMutableDictionary *_unfinishedMessageMap;
    NSArray *_participants;
    NSMutableDictionary *_participantStates;
    id _typingIndicatorTimer;
    IMMessage *_invitationForPendingParticipants;
    NSMutableArray *_messagesPendingJoin;
    NSMutableSet *_guids;
    NSMutableDictionary *_itemMap;
    NSMutableDictionary *_chatProperties;
    NSMutableDictionary *_participantProperties;
    NSArray *_frequentReplies;
    NSArray *_attachments;
    IMTimingCollection *_timingCollection;
    NSMutableArray *_chatItems;
    NSMutableArray *_chatItemsUpdates;
    id <IMChatItemRules> _chatItemRules;
    IMScheduledUpdater *_chatItemsUpdater;
    IMChatItem *_nextStaleChatItem;
    IMMultiDict *_messageActionsMap;
    id <IMChatSendProgressDelegate> _sendProgressDelegate;
    NSTimer *_sendProgressTimer;
    NSMutableDictionary *_sendingItems;
    float _cachedSendProgress;
    long long _joinState;
    unsigned char _style;
    unsigned long long _numberOfMessagesToKeepLoaded;
    unsigned long long _dbFailedCount;
    unsigned long long _dbUnreadCount;
    void *_context;
    unsigned int _hasBeenConfigured:1;
    unsigned int _isFirstMessageInvitation:1;
    unsigned int _wasInvitationHandled:1;
    unsigned int _didSendAFinishedMessage:1;
    unsigned int _hasPendingMarkRead:1;
    unsigned int _isUpdatingChatItems:1;
    unsigned int _isRecording:1;
    BOOL _downgradeState;
    _Bool _ignoreDowngradeStatusUpdates;
}

+ (Class)chatItemRulesClass;
+ (void)setChatItemRulesClass:(Class)arg1;
+ (void)_initializeFMF;
@property(retain, nonatomic) IMMessage *invitationForPendingParticipants; // @synthesize invitationForPendingParticipants=_invitationForPendingParticipants;
@property(readonly, nonatomic) long long joinState; // @synthesize joinState=_joinState;
@property(readonly, nonatomic) NSDate *dateModified; // @synthesize dateModified=_dateModified;
@property(readonly, nonatomic) NSDate *dateCreated; // @synthesize dateCreated=_dateCreated;
@property(nonatomic) NSString *displayName; // @synthesize displayName=_displayName;
@property(readonly, nonatomic) NSString *roomName; // @synthesize roomName=_roomName;
@property(nonatomic) void *contextInfo; // @synthesize contextInfo=_context;
@property(readonly, nonatomic) unsigned char chatStyle; // @synthesize chatStyle=_style;
@property(readonly, nonatomic) NSArray *participants; // @synthesize participants=_participants;
@property(readonly, nonatomic) IMAccount *account; // @synthesize account=_account;
@property(readonly, nonatomic) NSString *guid; // @synthesize guid=_guid;
@property(retain, nonatomic, setter=_setGUIDs:) NSMutableSet *_guids; // @synthesize _guids;
@property(readonly, retain, nonatomic) NSString *groupID; // @synthesize groupID=_groupID;
@property(readonly, retain, nonatomic) NSString *lastAddressedHandleID; // @synthesize lastAddressedHandleID=_lastAddressedHandleID;
@property(retain, nonatomic, getter=_nextStaleChatItem, setter=_setNextStaleChatItem:) IMChatItem *nextStaleChatItem; // @synthesize nextStaleChatItem=_nextStaleChatItem;
@property(retain, nonatomic) NSArray *frequentReplies; // @synthesize frequentReplies=_frequentReplies;
- (id)_initWithDictionaryRepresentation:(id)arg1 items:(id)arg2 participantsHint:(id)arg3 accountHint:(id)arg4;
- (id)description;
- (void)_daemonDied:(id)arg1;
- (void)_daemonAlive:(id)arg1;
- (void)_calculateDowngradeState;
- (void)sendDowngradePingForMessage:(id)arg1 manualDowngrade:(_Bool)arg2;
- (void)_setAndIncrementDowngradeMarkersForManual:(_Bool)arg1;
- (void)_clearDowngradeMarkers;
- (id)_consecutiveDowngradeAttemptsViaManualDowngrades:(_Bool)arg1;
- (void)_calculateDowngradeStateTimerFired;
- (void)_updateDowngradeState:(BOOL)arg1 checkAgainInterval:(double)arg2;
- (void)_invalidateDowngradeState;
- (_Bool)isDowngraded;
- (void)_targetToService:(id)arg1 newComposition:(_Bool)arg2;
- (void)_setPreviousAccount:(id)arg1 forService:(id)arg2;
- (id)_previousAccountForService:(id)arg1;
- (_Bool)_chatHasValidAccount:(id)arg1 forService:(id)arg2;
- (_Bool)_accountIsOperational:(id)arg1 forService:(id)arg2;
- (void)_setupPreferredServiceChangeHandlers;
- (void)_accountControllerUpdated:(id)arg1;
- (_Bool)_sanityCheckAccounts;
- (void)addPendingParticipants:(id)arg1;
- (void)removeParticipants:(id)arg1 reason:(id)arg2;
- (void)inviteParticipants:(id)arg1 reason:(id)arg2;
- (void)_invitePendingParticipants;
- (void)_inviteParticipants:(id)arg1 reason:(id)arg2;
- (id)_pendingParticipants;
- (_Bool)canAddParticipants:(id)arg1;
- (_Bool)canAddParticipant:(id)arg1;
@property(readonly, nonatomic) _Bool canLeaveChat;
- (void)_addParticipant:(id)arg1;
- (void)remove;
- (void)leave;
- (void)join;
@property(retain, nonatomic) IMHandle *recipient;
- (void)setRecipient:(id)arg1 locally:(_Bool)arg2;
- (void)_setAccount:(id)arg1 locally:(_Bool)arg2;
- (void)_setAccount:(id)arg1;
- (_Bool)_hasCommunicatedOnService:(id)arg1;
- (void)setValue:(id)arg1 forProperty:(id)arg2 ofParticipant:(id)arg3;
- (id)valueForProperty:(id)arg1 ofParticipant:(id)arg2;
- (id)allPropertiesOfParticipant:(id)arg1;
- (void)setValue:(id)arg1 forChatProperty:(id)arg2;
- (id)valueForChatProperty:(id)arg1;
- (id)allChatProperties;
- (void)_setChatProperties:(id)arg1;
- (_Bool)_isDuplicate:(id)arg1;
- (void)markMessageAsPlayed:(id)arg1;
- (void)markAllMessagesAsRead;
- (void)markMessagesAsRead:(id)arg1;
- (void)markMessageAsRead:(id)arg1;
- (void)_markItemsAsRead:(id)arg1;
- (void)_setTimerForReadMessageCache;
- (void)__clearReadMessageCache;
- (void)updateMessage:(id)arg1 flags:(unsigned long long)arg2;
- (void)updateMessage:(id)arg1;
- (_Bool)authorizedToSendCurrentLocationMessage;
- (_Bool)canSendCurrentLocationMessage;
- (_Bool)canSendTransfer:(id)arg1;
- (_Bool)canSendMessage:(id)arg1;
@property(nonatomic) _Bool localUserIsRecording;
@property(nonatomic) _Bool localUserIsTyping;
- (void)_setLocalUserIsTyping:(_Bool)arg1 recording:(_Bool)arg2 suppliedGUID:(id)arg3;
@property(readonly, nonatomic) NSString *localTypingMessageGUID;
- (void)sendCurrentLocationMessage;
- (void)sendMessage:(id)arg1;
- (void)_sendMessage:(id)arg1 adjustingSender:(_Bool)arg2 shouldQueue:(_Bool)arg3;
- (void)cancelMessage:(id)arg1;
- (void)declineInvitation;
- (void)acceptInvitation;
@property(readonly, nonatomic) _Bool hasUnhandledInvitation;
@property(readonly, nonatomic) NSString *roomNameWithoutSuffix;
@property(readonly, retain, nonatomic) NSString *persistentID;
- (void)_updateDisplayName:(id)arg1;
- (void)_setDisplayName:(id)arg1;
- (void)setRoomName:(id)arg1;
@property(readonly, nonatomic) unsigned long long overallChatStatus;
@property(readonly, nonatomic) _Bool canHaveMultipleParticipants;
@property(readonly, nonatomic) NSString *chatIdentifier;
- (void)_clearCachedIdentifier;
- (unsigned long long)stateForParticipant:(id)arg1;
- (id)participantsWithState:(unsigned long long)arg1;
- (id)_performQueryWithKey:(id)arg1 loadImmediately:(_Bool)arg2 block:(id)arg3;
- (void)_remapHandle:(id)arg1 toHandle:(id)arg2;
- (void)_showErrorMessage:(id)arg1;
- (void)_participant:(id)arg1 statusChanged:(int)arg2;
- (void)_setJoinState:(long long)arg1 quietly:(_Bool)arg2;
- (void)_setJoinState:(long long)arg1;
- (_Bool)_handleIncomingItem:(id)arg1 shouldQueue:(_Bool)arg2;
- (_Bool)_handleIncomingItem:(id)arg1;
- (void)_handleMessageGUIDDeletions:(id)arg1;
- (void)_setParticipantState:(unsigned long long)arg1 forHandle:(id)arg2 quietly:(_Bool)arg3;
- (void)_postNotification:(id)arg1 userInfo:(id)arg2;
- (void)_endTiming;
- (void)_startTiming:(id)arg1;
- (id)_timingCollection;
- (void)_accountLoggedOut:(id)arg1;
- (void)_unwatchHandleStatusChangedForHandle:(id)arg1;
- (void)_watchHandleStatusChangedForHandle:(id)arg1;
- (void)_handleHandleStatusChanged:(id)arg1;
- (void)_recomputeOverallChatStatusQuietly:(_Bool)arg1;
- (void)clear;
- (_Bool)deleteAllHistory;
@property(readonly, nonatomic) unsigned long long messageFailureCount;
@property(readonly, nonatomic) unsigned long long unreadMessageCount;
@property(readonly, nonatomic) unsigned long long messageCount;
@property(readonly, nonatomic) IMMessage *lastMessage;
@property(readonly, nonatomic) IMMessage *lastIncomingFinishedMessage;
@property(readonly, nonatomic) IMMessage *lastIncomingMessage;
@property(readonly, nonatomic) IMMessage *lastFinishedMessage;
- (id)messageForGUID:(id)arg1;
- (id)_itemForGUID:(id)arg1;
- (id)_itemsForGUIDs:(id)arg1;
- (void)_insertHistoricalMessages:(id)arg1 queryID:(id)arg2 isRefresh:(_Bool)arg3 isHistoryQuery:(_Bool)arg4 limit:(unsigned long long)arg5;
- (void)_insertHistoricalMessages:(id)arg1 queryID:(id)arg2 isRefresh:(_Bool)arg3 isHistoryQuery:(_Bool)arg4;
- (void)_buildInitialChatItems:(id)arg1;
- (_Bool)_shouldAnnouncePeopleJoin;
- (id)_IMUnfinishedMapSenderGUIDToRemove:(id)arg1 requireFinished:(_Bool)arg2;
- (void)_setDBFailedCount:(unsigned long long)arg1;
- (void)_setDBUnreadCount:(unsigned long long)arg1;
- (void)_clearUnreadCount;
- (id)_messageActionsMap;
- (void)_unmapItem:(id)arg1;
- (void)_mapItem:(id)arg1;
@property(readonly, nonatomic) _Bool _shouldRegisterChat;
- (void)dealloc;
- (id)init;
- (void)_initialize;
- (id)_initWithGUID:(id)arg1 account:(id)arg2 style:(unsigned char)arg3 roomName:(id)arg4 displayName:(id)arg5 items:(id)arg6 participants:(id)arg7;
- (void)_setupObservation;
- (id)_privateInitWithAccount:(id)arg1 style:(unsigned char)arg2 roomName:(id)arg3 messages:(id)arg4 participants:(id)arg5;
- (void)deleteTransfers:(id)arg1;
@property(readonly, copy, nonatomic) NSArray *attachments;
- (void)_setAttachments:(id)arg1;
- (id)loadFrequentRepliesLimit:(unsigned long long)arg1 loadImmediately:(_Bool)arg2;
- (id)loadMessagesUpToGUID:(id)arg1 date:(id)arg2 limit:(unsigned long long)arg3 loadImmediately:(_Bool)arg4;
- (id)loadMessagesBeforeDate:(id)arg1 limit:(unsigned long long)arg2 loadImmediately:(_Bool)arg3;
- (id)loadMessagesBeforeDate:(id)arg1 limit:(unsigned long long)arg2;
- (id)loadMessagesUpToGUID:(id)arg1 limit:(unsigned long long)arg2;
@property(readonly, nonatomic) _Bool hasMoreMessagesToLoad;
@property(nonatomic) unsigned long long numberOfMessagesToKeepLoaded;
- (void)_trimMessagesAsNeeded;
- (void)_trimMessagesLeavingNumber:(unsigned long long)arg1;
- (_Bool)sendDowngradeNotificationTo:(id)arg1;
- (void)_handleIncomingCommand:(id)arg1;
- (void)_handleDeliveredCommand:(id)arg1;
- (void)_setTypingIndicatorTimeout;
- (void)_typingIndicatorTimedOut:(id)arg1;
- (void)_clearIncomingTypingIndicators;
- (void)_clearTypingIndicatorTimeout;
- (void)_updateTypingIndicatorTimeout;
- (id)chatItemsForItems:(id)arg1;
- (id)chatItemsForMessages:(id)arg1;
- (void)markChatItemAsPlayed:(id)arg1;
- (void)markChatItemAsSaved:(id)arg1;
- (void)deleteChatItems:(id)arg1;
- (void)_queueReplaceStaleChatItems;
- (void)_replaceStaleChatItems;
- (void)_removeChatItemsInRange:(struct _NSRange)arg1;
- (void)_replaceChatItemsWithChatItemsForItems:(id)arg1;
- (void)_replaceChatItemsForItem:(id)arg1 withChatItemsForItem:(id)arg2;
- (void)_removeChatItemsForItem:(id)arg1;
- (void)_appendChatItemsForItem:(id)arg1;
- (void)_updateChatItemsWithReason:(id)arg1 block:(id)arg2;
- (void)updateChatItemsIfNeeded;
- (void)endHoldingUpdatesForKey:(id)arg1;
- (void)beginHoldingUpdatesForKey:(id)arg1;
- (void)_queueChatItemsUpdate:(id)arg1;
- (void)_updateChatItems;
- (id)chatItems;
- (void)_sendProgressTimerFired:(id)arg1;
- (void)_scheduleSendProgressTimerIfNeeded;
- (void)_updateSendProgress;
- (void)resetSendProgressAndFinished:(_Bool)arg1;
- (float)progressSending:(unsigned long long *)arg1 of:(unsigned long long *)arg2;
- (void)_unmapSendingItem:(id)arg1;
- (void)_mapSendingItem:(id)arg1;
- (_Bool)_hasSendingMessages;
@property(nonatomic) id <IMChatSendProgressDelegate> sendProgressDelegate;
- (void)_configureLocationShareItem:(id)arg1;
- (void)markAllLocationShareItemsAsUnactionable;
- (void)stopTrackingParticipantLocations;
- (void)startTrackingParticipantLocations;
- (void)stopSharingLocation;
- (void)shareLocationUntilDate:(id)arg1;
@property(readonly, nonatomic) _Bool allRecipientsSharingLocation;
@property(readonly, nonatomic) _Bool hasRecipientsSharingLocation;
@property(readonly, nonatomic) _Bool allRecipientsFollowingLocation;
@property(readonly, nonatomic) _Bool hasRecipientsFollowingLocation;
@property(readonly, retain, nonatomic) NSSet *allSiblingFMFHandles;
@property(readonly, retain, nonatomic) NSSet *fmfHandles;
@property(readonly, retain, nonatomic) IMChatRegistry *chatRegistry;
- (id)testChatItems;

@end

